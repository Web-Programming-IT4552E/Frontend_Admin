(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[21],{1065:function(e,t,n){"use strict";n.r(t);var c=n(198),a=n(733),o=n(1),s=n(20),i=n(1059),r=n(938),u=n(940),l=n(1077),d=n(1081),p=n(737),f=(n(886),n(836),n(51),n(193)),m=n(783),h=n(19),b=["remember"];n(854);t.default=Object(f.b)()((function(e){var t=e.t,n=Object(o.useState)(!1),f=Object(a.a)(n,2),g=f[0],j=f[1],O=Object(s.g)();return Object(h.jsxs)("div",{className:"login",style:{height:"100%",minHeight:"100%"},children:[Object(h.jsx)(r.a,{span:24,className:"login-container",children:Object(h.jsxs)(u.a,{lg:12,className:"left-side forgot-password",children:[Object(h.jsx)("h2",{children:t("Forgot Password")}),Object(h.jsxs)(l.a,{name:"normal_login",initialValues:{remember:!0},onFinish:function(e){e.remember;var n=Object(c.a)(e,b);j(!0),Object(m.a)(n,(function(e){var n;200==e.status&&(console.log(e),i.a.success({message:t("Notification"),description:t("".concat((null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||"Send reset password confirmation email success succesfully")),placement:"bottomRight",duration:1.5}),j(!1));200!==e.status&&(console.log(e),i.a.error({message:t("Notification"),description:t("".concat(e.message||"Send email for recover password failed")),placement:"bottomRight",duration:1.5}),j(!1))}))},className:"position-relative",children:[Object(h.jsx)("label",{htmlFor:"email",children:t("Email")}),Object(h.jsx)(l.a.Item,{name:"email",rules:[{validator:function(e,t){if(t)return Promise.resolve()}}],children:Object(h.jsx)(d.a,{placeholder:t("Email")})}),Object(h.jsx)(p.a,{htmlType:"submit",className:"box-1",loading:g,children:t("Confirm")}),Object(h.jsx)(p.a,{htmlType:"button",onClick:function(){O.push("/login")},className:"box-2",loading:g,children:t("Login")})]})]})}),Object(h.jsx)("div",{className:"footer",children:"Uray"})]})}))},741:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r}));n(78),n(110);var c=n(51),a=(n(794),Object(c.b)());function o(e,t){var n=[];return e.forEach((function(e){e.permission?e.permission.includes(t)&&n.push(e):n.push(e)})),n}function s(e,t){var n=[];return e.forEach((function(e){e.permission?e.permission.includes(t)&&(e._children&&e._children.forEach((function(n,c){n.permission&&!n.permission.includes(t)&&e._children.splice(c,1)})),n.push(e)):(e._children&&e._children.forEach((function(n,c){n.permission&&!n.permission.includes(t)&&e._children.splice(c,1)})),n.push(e))})),n}function i(e){var t={email:e.email,role:e.role};localStorage.setItem("".concat("uray","_user"),JSON.stringify(t))}function r(e){a.post("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","auth/refresh-token"),{accessToken:localStorage.getItem("".concat("uray","_access_token")),refreshToken:localStorage.getItem("".concat("uray","_refresh_token"))}).then((function(t){localStorage.setItem("".concat("uray","_access_token"),t.data.accessToken),localStorage.setItem("".concat("uray","_refresh_token"),t.data.refreshToken),e()})).catch((function(e){console.log(e),e.response&&[401,403,400,404].includes(e.response.status)&&u()}))}function u(){localStorage.removeItem("".concat("uray","_user")),localStorage.removeItem("".concat("uray","_access_token")),localStorage.removeItem("".concat("uray","_refresh_token")),window.location.href="/login"}},783:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return d}));n(112);var c=n(51),a=n(741);function o(e){Object(c.b)().get("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","account")).then((function(t){e(t)})).catch((function(t){t.response&&(403===t.response.status?Object(a.c)((function(){o(e)})):e(t.response.data))}))}function s(e,t){Object(c.b)().put("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","account/change/profile"),e).then((function(e){t(e)})).catch((function(n){n.response&&(403===n.response.status?Object(a.c)((function(){s(e,t)})):t(n.response.data))}))}function i(e,t){var n=Object(c.b)();console.log(e),n.post("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","auth/login"),e).then((function(e){t(e)})).catch((function(e){e.response&&t(e.response.data)}))}function r(e,t){Object(c.b)().post("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","user/forgot-password"),e).then((function(e){t(e)})).catch((function(e){e.response&&t(e.response.data)}))}var u=function(e,t){Object(c.b)().get("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","user/forgot-password/verify/").concat(e)).then((function(e){t(e)})).catch((function(e){e.response&&t(e.response.data)}))},l=function e(t,n){Object(c.b)().patch("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","user/change/password"),t).then((function(e){n(e)})).catch((function(c){c.response&&(403===c.response.status?Object(a.c)((function(){e(t,n)})):n(c.response.data))}))},d=function e(t,n){Object(c.b)().post("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","user/forgot-password/updatePassword"),t).then((function(e){n(e)})).catch((function(c){c.response&&(403===c.response.status?Object(a.c)((function(){e(t,n)})):n(c.response.data))}))}},794:function(e,t,n){"use strict";var c=n(842);!function(){var e}()},836:function(e,t,n){},886:function(e,t,n){"use strict";n.p},938:function(e,t,n){"use strict";var c=n(1048);t.a=c.a},940:function(e,t,n){"use strict";var c=n(941);t.a=c.a}}]);
//# sourceMappingURL=21.04d75496.chunk.js.map