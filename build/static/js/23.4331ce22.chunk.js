(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[23],{1066:function(e,t,n){"use strict";n.r(t);var c=n(198),s=n(733),a=n(1),o=n(20),r=n(1055),i=n(1059),u=n(938),d=n(940),p=n(1077),l=n(1081),f=n(737),m=(n(836),n(193)),h=n(783),b=n(19),g=["remember"];n(854);t.default=Object(m.b)()((function(e){var t=e.t,n=Object(a.useState)(!1),m=Object(s.a)(n,2),j=m[0],O=m[1],w=Object(o.h)().pathname.split("/")[4],_=Object(o.g)();Object(a.useEffect)((function(){w&&Object(h.g)(w,(function(e){200==e.status&&r.b.success(t("".concat(e.data.message))),200!==e.status&&(i.a.error({message:t("Notification"),description:t("".concat(e.message||"Verify failed")),placement:"bottomRight",duration:1.5}),_.push("/login"))}))}),[w]);return Object(b.jsxs)("div",{className:"login",style:{height:"100%",minHeight:"100%"},children:[Object(b.jsx)(u.a,{span:24,className:"login-container",children:Object(b.jsxs)(d.a,{lg:12,className:"left-side forgot-password",children:[Object(b.jsx)("h2",{children:t("Forgot Password")}),Object(b.jsxs)(p.a,{name:"normal_login",initialValues:{remember:!0},onFinish:function(e){e.remember;var n=Object(c.a)(e,g);O(!0),n.active_token=w,Object(h.f)(n,(function(e){200==e.status&&(i.a.success({message:t("Notification"),description:t("".concat(e.data.message," || 'Update password success succesfully'")),placement:"bottomRight",duration:1.5}),O(!1),_.push("/login")),200!==e.status&&(i.a.error({message:t("Notification"),description:t("".concat(e.message||"Update password success failed!")),placement:"bottomRight",duration:1.5}),O(!1))}))},className:"position-relative",children:[Object(b.jsx)("label",{htmlFor:"password",children:t("Password")}),Object(b.jsx)(p.a.Item,{name:"new_password",rules:[{required:!0,message:t("Please input your password!")}],children:Object(b.jsx)(l.a,{type:"password",placeholder:t("Password")})}),Object(b.jsx)("label",{htmlFor:"password",children:t("Confirm Password")}),Object(b.jsx)(p.a.Item,{name:"confirm_new_password",rules:[{required:!0,message:t("Please input your confirm password!")},function(e){var n=e.getFieldValue;return{validator:function(e,c){return c&&n("new_password")!==c?Promise.reject(new Error(t("Password does not match!"))):Promise.resolve()}}}],children:Object(b.jsx)(l.a,{type:"password",placeholder:t("Password")})}),Object(b.jsx)(f.a,{htmlType:"submit",className:"box-1",loading:j,children:t("Confirm")}),Object(b.jsx)(f.a,{htmlType:"button",onClick:function(){_.push("/login")},className:"box-2",children:t("Login")})]})]})}),Object(b.jsx)("div",{className:"footer",children:"Uray Store"})]})}))},741:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return i}));n(78),n(110);var c=n(51),s=(n(794),Object(c.b)());function a(e,t){var n=[];return e.forEach((function(e){e.permission?e.permission.includes(t)&&n.push(e):n.push(e)})),n}function o(e,t){var n=[];return e.forEach((function(e){e.permission?e.permission.includes(t)&&(e._children&&e._children.forEach((function(n,c){n.permission&&!n.permission.includes(t)&&e._children.splice(c,1)})),n.push(e)):(e._children&&e._children.forEach((function(n,c){n.permission&&!n.permission.includes(t)&&e._children.splice(c,1)})),n.push(e))})),n}function r(e){var t={email:e.email,role:e.role};localStorage.setItem("".concat("uray","_user"),JSON.stringify(t))}function i(e){s.post("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","auth/refresh-token"),{accessToken:localStorage.getItem("".concat("uray","_access_token")),refreshToken:localStorage.getItem("".concat("uray","_refresh_token"))}).then((function(t){localStorage.setItem("".concat("uray","_access_token"),t.data.accessToken),localStorage.setItem("".concat("uray","_refresh_token"),t.data.refreshToken),e()})).catch((function(e){console.log(e),e.response&&[401,403,400,404].includes(e.response.status)&&u()}))}function u(){localStorage.removeItem("".concat("uray","_user")),localStorage.removeItem("".concat("uray","_access_token")),localStorage.removeItem("".concat("uray","_refresh_token")),window.location.href="/login"}},783:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return p}));n(112);var c=n(51),s=n(741);function a(e){Object(c.b)().get("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","account")).then((function(t){e(t)})).catch((function(t){t.response&&(403===t.response.status?Object(s.c)((function(){a(e)})):e(t.response.data))}))}function o(e,t){Object(c.b)().put("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","account/change/profile"),e).then((function(e){t(e)})).catch((function(n){n.response&&(403===n.response.status?Object(s.c)((function(){o(e,t)})):t(n.response.data))}))}function r(e,t){var n=Object(c.b)();console.log(e),n.post("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","auth/login"),e).then((function(e){t(e)})).catch((function(e){e.response&&t(e.response.data)}))}function i(e,t){Object(c.b)().post("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","user/forgot-password"),e).then((function(e){t(e)})).catch((function(e){e.response&&t(e.response.data)}))}var u=function(e,t){Object(c.b)().get("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","user/forgot-password/verify/").concat(e)).then((function(e){t(e)})).catch((function(e){e.response&&t(e.response.data)}))},d=function e(t,n){Object(c.b)().patch("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","user/change/password"),t).then((function(e){n(e)})).catch((function(c){c.response&&(403===c.response.status?Object(s.c)((function(){e(t,n)})):n(c.response.data))}))},p=function e(t,n){Object(c.b)().post("".concat("https://cosmetic-backend.eastasia.cloudapp.azure.com/api-admin/","user/forgot-password/updatePassword"),t).then((function(e){n(e)})).catch((function(c){c.response&&(403===c.response.status?Object(s.c)((function(){e(t,n)})):n(c.response.data))}))}},794:function(e,t,n){"use strict";var c=n(842);!function(){var e}()},836:function(e,t,n){},938:function(e,t,n){"use strict";var c=n(1048);t.a=c.a},940:function(e,t,n){"use strict";var c=n(941);t.a=c.a}}]);
//# sourceMappingURL=23.4331ce22.chunk.js.map